<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à üíå</title>

<link href="https://fonts.googleapis.com/css2?family=Itim&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:'Itim', cursive;
  background:#fff0f6;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
  overflow:hidden;
}

.container{
  width:100%;
  max-width:420px;
  padding:20px;
}

.letter{
  background:#ffe4ec;
  border-radius:22px;
  padding:25px;
  text-align:center;
  box-shadow:0 20px 40px rgba(0,0,0,.15);
  animation:fade .6s ease;
}

@keyframes fade{
  from{opacity:0;transform:translateY(40px)}
  to{opacity:1;transform:none}
}

button{
  width:100%;
  margin:8px 0;
  padding:12px;
  border:none;
  border-radius:999px;
  background:#fb7185;
  color:#fff;
  font-size:16px;
  cursor:pointer;
}

/* üê± ‡πÅ‡∏ú‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á‡πÅ‡∏°‡∏ß */
.disc{
  width:180px;
  height:180px;
  border-radius:50%;
  background:url("images.jpg") center/cover no-repeat;
  margin:20px auto;
  animation:spin linear infinite;   
  animation-duration:8s; /* ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏´‡∏°‡∏∏‡∏ô‡∏ä‡πâ‡∏≤ */
  animation-play-state:paused;
  box-shadow:0 10px 25px rgba(0,0,0,.25);
}

@keyframes spin{
  to{transform:rotate(360deg)}
}

/* üéõ Player */
.player{
  background:#fff;
  border-radius:18px;
  padding:15px;
  margin-top:15px;
}

.controls{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:18px;
  font-size:26px;
}

.controls span{
  cursor:pointer;
  user-select:none;
}

.progress{
  margin-top:10px;
}
.progress input{
  width:100%;
}

/* üå∏ ‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ‡∏•‡∏≠‡∏¢ */
.flower{
  position:fixed;
  bottom:-40px;
  font-size:20px;
  animation:float 6s linear forwards;
}
@keyframes float{
  to{transform:translateY(-110vh);opacity:0}
}

/* üíó ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÄ‡∏î‡πâ‡∏á */
.heart{
  position:absolute;
  font-size:26px;
  animation:pop 1s ease forwards;
  pointer-events:none;
}
@keyframes pop{
  0%{transform:scale(0);opacity:0}
  40%{transform:scale(1.5);opacity:1}
  100%{transform:translateY(-60px) scale(1);opacity:0}
}

/* üåô ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏´‡∏£‡∏µ‡πà‡∏ï‡∏≠‡∏ô‡πÄ‡∏û‡∏•‡∏á‡∏à‡∏ö */
.dim{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  display:flex;
  justify-content:center;
  align-items:center;
  color:#fff;
  font-size:18px;
  text-align:center;
  z-index:99;
  animation:fadeIn 1.2s ease;
}
@keyframes fadeIn{
  from{opacity:0}
  to{opacity:1}
}
</style>
</head>

<body>
<div class="container" id="app"></div>

<audio id="song" src="song.mp3"></audio>

<script>
const app=document.getElementById("app");
const song=document.getElementById("song");

let step=0;
let flowerTimer=null;

const questions=[
 "‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏á‡∏ö‡πâ‡∏≤‡∏á ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏°‡∏±‡πâ‡∏¢ üòä",
 "‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏à‡∏≠‡∏≠‡∏∞‡πÑ‡∏£‡∏°‡∏≤‡∏ö‡πâ‡∏≤‡∏á ‡πÄ‡∏•‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏ü‡∏±‡∏á‡πÑ‡∏î‡πâ‡∏ô‡∏∞",
 "‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢‡∏°‡∏±‡πâ‡∏¢ ü´∂",
 "‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à‡∏à‡∏≤‡∏Å‡πÄ‡∏£‡∏≤‡∏°‡∏±‡πâ‡∏¢",
 "‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏≠‡∏∞‡πÑ‡∏£‡∏à‡∏∞‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô ‡πÄ‡∏£‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡πÜ‡∏ô‡∏∞ üíó"
];

start();

function start(){
 app.innerHTML=`
  <div class="letter">
    <h2>üíå ‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á‡πÄ‡∏ò‡∏≠</h2>
    <button onclick="next()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏¢</button>
  </div>`;
}

function next(){
 if(step>=questions.length){
  musicPage();
  return;
 }
 app.innerHTML=`
  <div class="letter">
    <h3>${questions[step]}</h3>
    <button onclick="step++;next()">‡∏ï‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß</button>
  </div>`;
}

function musicPage(){
 app.innerHTML=`
  <div class="letter">
    <h3>‡πÄ‡∏û‡∏•‡∏á‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡∏ü‡∏±‡∏á‡∏ô‡∏∞ üéß</h3>

    <div class="disc" id="disc" onclick="togglePlay()"></div>

    <div class="player">
      <div class="controls">
        <span onclick="seek(-5)">‚è™</span>
        <span onclick="togglePlay()" id="playBtn">‚ñ∂Ô∏è</span>
        <span onclick="seek(5)">‚è©</span>
      </div>

      <div class="progress">
        <input type="range" min="0" value="0" id="bar">
      </div>
    </div>

    <p>
      ‡πÄ‡∏û‡∏•‡∏á‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏∞‡πÑ‡∏£‡∏à‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏•‡∏¢<br>
      ‡πÅ‡∏Ñ‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏û‡∏±‡∏Å<br>
      ‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏ô‡∏∞ üíó
    </p>
  </div>`;

 const bar=document.getElementById("bar");
 const disc=document.getElementById("disc");

 song.ontimeupdate=()=>{
  bar.max=song.duration;
  bar.value=song.currentTime;

  if(!song.paused){
    disc.style.animationDuration="4s"; // ‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÄ‡∏•‡πà‡∏ô
  }
 };

 bar.oninput=()=>{
  song.currentTime=bar.value;
 };

 song.onended=()=>{
  stopFlowers();
  disc.style.animationPlayState="paused";

  const dim=document.createElement("div");
  dim.className="dim";
  dim.innerHTML=`
    <div>
      <p>‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏∞ üåô</p>
      <p>‡∏û‡∏±‡∏Å‡πÄ‡∏ñ‡∏≠‡∏∞ ‡πÄ‡∏î‡∏µ‡πã‡∏¢‡∏ß‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡∏Ñ‡πà‡∏≠‡∏¢‡∏™‡∏π‡πâ‡πÉ‡∏´‡∏°‡πà üê±üíó</p>
    </div>`;
  document.body.appendChild(dim);
 };
}

function togglePlay(){
 const disc=document.getElementById("disc");
 const btn=document.getElementById("playBtn");

 popHeart();

 if(song.paused){
  song.play();
  disc.style.animationPlayState="running";
  disc.style.animationDuration="4s";
  btn.textContent="‚è∏";
  startFlowers();
 }else{
  song.pause();
  disc.style.animationPlayState="paused";
  disc.style.animationDuration="8s";
  btn.textContent="‚ñ∂Ô∏è";
  stopFlowers();
 }
}

function seek(sec){
 song.currentTime+=sec;
}

function startFlowers(){
 if(flowerTimer) return;
 flowerTimer=setInterval(()=>{
  const f=document.createElement("div");
  f.className="flower";
  f.textContent="üå∏";
  f.style.left=Math.random()*100+"%";
  document.body.appendChild(f);
  setTimeout(()=>f.remove(),6000);
 },600);
}

function stopFlowers(){
 clearInterval(flowerTimer);
 flowerTimer=null;
}

function popHeart(){
 const disc=document.getElementById("disc");
 const rect=disc.getBoundingClientRect();
 const h=document.createElement("div");
 h.className="heart";
 h.textContent="üíó";
 h.style.left=rect.left+rect.width/2+"px";
 h.style.top=rect.top+rect.height/2+"px";
 document.body.appendChild(h);
 setTimeout(()=>h.remove(),1000);
}
</script>
</body>
</html>
